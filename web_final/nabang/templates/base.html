{% load static %}
<!doctype html>
<html lang="ko">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=0.7">
    <meta name="description" content="Django로 만든 간단한 게시판입니다.">
    <meta name="author" content="leeyongjoo">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

    <!-- custom CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <!-- Font -->
    <link rel="stylesheet" type="text/css"
          href="https://cdn.rawgit.com/innks/NanumSquareRound/master/nanumsquareround.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">

    <title>{% block title %}{% endblock %} : 나만의 방 나방</title>
</head>

<body class="col-lg-8 mx-auto p-3 py-md-5">

{% block header %}
{% include "base_header.html" %}
{% endblock %}

<!-- 각 템플릿 안에 삽입될 내용 Start -->
{% block content %}
{% endblock %}
<!-- 각 템플릿 안에 삽입될 내용 End -->

{% block footer %}
{% include "base_footer.html" %}
{% endblock %}

{% include "base_script.html" %}

<!-- 자바스크립트 Start -->
{% block script %}
{% endblock %}
<!-- 자바스크립트 End -->
<div id="login-popup" class="popup">
    <div class="popup-content">
        <span class="close-button">&times;</span>
        <!-- 로그인 폼 -->
        {% if not user.is_authenticated %}
        <form id="login-form" method="post" action="{% url 'login' %}">
            {% csrf_token %}
            <h1>로그인</h1>
            <div class="input-container">
                <input type="text" placeholder="아이디" name="username" required>
                <input type="password" placeholder="비밀번호" name="password" required>
                <button type="submit" class="login-button">로그인</button>
            </div>
        </form>
        <!-- 소셜 로그인 버튼 -->
        <div class="social-icons">
            {% load socialaccount %}
            <a href='{% provider_login_url "kakao" %}' class="social-icon"><img src="{% static 'images/kakaotalk.png' %}" alt="kakaotalk"></a>
            <a href="{% provider_login_url 'naver' %}" class="social-icon"><img src="{% static 'images/naver.png' %}" alt="naver"></a>
            <a href="{% provider_login_url 'google' %}" class="social-icon"><img src="{% static 'images/google.png' %}" alt="google"></a>
        </div>
        <div class="signup-prompt">
            아직 회원이 아니신가요?? <a href="/signup">회원가입</a> <!-- 회원가입 링크 -->
        </div>
        {% else %}
            {% block additional_content %}
            <h1> 내정보 </h1>
            <ul>
                <li> name : {{user}}</li>
                <li> email : {{user.email}}</li>
                <li>{{user.date_joined}}</li>
            </ul>
            <a href="{% url 'password_change' %}">[암호 변경하기]</a>
            <a href="{% url 'delete_account' %}">[회원탈퇴]</a>
            {% endblock %}
        {% endif %}
        {% if messages %}
        <script type="text/javascript">
            window.onload = function() {
                {% for message in messages %}
                    alert("{{ message }}");
                {% endfor %}
            }
        </script>
        {%else%}
        {% endif %}
    </div>
</div>
</body>
<script src="{% static 'js/common.js' %}"></script>
</html>